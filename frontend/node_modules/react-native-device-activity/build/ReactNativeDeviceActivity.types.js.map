{"version":3,"file":"ReactNativeDeviceActivity.types.js","sourceRoot":"","sources":["../src/ReactNativeDeviceActivity.types.ts"],"names":[],"mappings":"AA4TA,MAAM,CAAC,MAAM,mBAAmB,GAAG;IACjC,uDAAuD;IACvD,aAAa,EAAE,CAAC;IAChB,oCAAoC;IACpC,MAAM,EAAE,CAAC;IACT,sCAAsC;IACtC,QAAQ,EAAE,CAAC;CACH,CAAC;AAsQX,MAAM,CAAC,MAAM,iBAAiB,GAAG;IAC/B,UAAU,EAAE,CAAC;IACb,KAAK,EAAE,CAAC;IACR,IAAI,EAAE,CAAC;IAEP,0BAA0B;IAC1B,OAAO,EAAE,CAAC;IAEV,0BAA0B;IAC1B,SAAS,EAAE,CAAC;IAEZ,0BAA0B;IAC1B,uBAAuB,EAAE,CAAC;IAE1B,0BAA0B;IAC1B,kBAAkB,EAAE,CAAC;IAErB,0BAA0B;IAC1B,cAAc,EAAE,CAAC;IAEjB,0BAA0B;IAC1B,mBAAmB,EAAE,CAAC;IAEtB,0BAA0B;IAC1B,oBAAoB,EAAE,EAAE;IAExB,0BAA0B;IAC1B,4BAA4B,EAAE,EAAE;IAEhC,0BAA0B;IAC1B,uBAAuB,EAAE,EAAE;IAE3B,0BAA0B;IAC1B,mBAAmB,EAAE,EAAE;IAEvB,0BAA0B;IAC1B,wBAAwB,EAAE,EAAE;IAE5B,0BAA0B;IAC1B,yBAAyB,EAAE,EAAE;IAE7B,0BAA0B;IAC1B,2BAA2B,EAAE,EAAE;IAE/B,0BAA0B;IAC1B,sBAAsB,EAAE,EAAE;IAE1B,0BAA0B;IAC1B,kBAAkB,EAAE,EAAE;IAEtB,0BAA0B;IAC1B,uBAAuB,EAAE,EAAE;IAE3B,0BAA0B;IAC1B,wBAAwB,EAAE,EAAE;CACpB,CAAC","sourcesContent":["import { EventEmitter } from \"expo-modules-core/types\";\nimport { PropsWithChildren } from \"react\";\nimport { NativeSyntheticEvent, StyleProp, ViewStyle } from \"react-native\";\n\nexport type CallbackEventName =\n  | \"intervalDidStart\"\n  | \"intervalDidEnd\"\n  | \"eventDidReachThreshold\"\n  | \"intervalWillStartWarning\"\n  | \"intervalWillEndWarning\"\n  | \"eventWillReachThresholdWarning\";\n\nexport type DeviceActivityMonitorEventPayload = {\n  callbackName: CallbackEventName;\n};\n\nexport type EventParsed = {\n  activityName: string;\n  callbackName: CallbackEventName;\n  eventName?: string;\n  lastCalledAt: Date;\n};\n\nexport type EventsLookup = Record<string, number>;\n\nexport type ActivitySelectionMetadata = {\n  applicationCount: number;\n  categoryCount: number;\n  webDomainCount: number;\n  includeEntireCategory: boolean;\n};\n\nexport type ActivitySelectionWithMetadata = {\n  familyActivitySelection: string | null;\n} & ActivitySelectionMetadata;\n\nexport type DeviceActivitySelectionEvent = ActivitySelectionWithMetadata;\n\nexport type DeviceActivitySelectionViewProps = PropsWithChildren<{\n  style?: StyleProp<ViewStyle>;\n  onSelectionChange?: (\n    selection: NativeSyntheticEvent<DeviceActivitySelectionEvent>,\n  ) => void;\n  familyActivitySelection?: string | null;\n  headerText?: string | null;\n  footerText?: string | null;\n}>;\n\nexport type DeviceActivitySelectionViewPersistedProps = PropsWithChildren<{\n  style?: StyleProp<ViewStyle>;\n  onSelectionChange?: (\n    selection: NativeSyntheticEvent<ActivitySelectionMetadata>,\n  ) => void;\n  familyActivitySelectionId: string;\n  headerText?: string | null;\n  footerText?: string | null;\n  /**\n   * Important for whitelisting, since it will ignore categories otherwise\n   * @link https://developer.apple.com/documentation/familycontrols/familyactivityselection/includeentirecategory\n   */\n  includeEntireCategory?: boolean;\n}>;\n\n/**\n * @link https://developer.apple.com/documentation/foundation/datecomponents\n */\nexport type DateComponents = {\n  // calendar: Calendar?;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779909-era\n   */\n  era?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779943-year\n   */\n  year?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1780256-month\n   */\n  month?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779808-day\n   */\n  day?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779899-hour\n   */\n  hour?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779900-minute\n   */\n  minute?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779901-second\n   */\n  second?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779902-nanosecond\n   */\n  nanosecond?: number;\n  /**\n   * @link https://developer.apple.com/documentation/foundation/datecomponents/1779903-weekday\n   */\n  weekday?: number;\n  weekdayOrdinal?: number;\n  quarter?: number;\n  weekOfMonth?: number;\n  weekOfYear?: number;\n  yearForWeekOfYear?: number;\n\n  /**\n   * mapped to init(identifier:)\n   * @link https://developer.apple.com/documentation/foundation/timezone/3126780-init\n   * or init(abbreviation:)\n   * @link https://developer.apple.com/documentation/foundation/timezone/3126779-init\n   */\n  timeZoneIdentifier?: string;\n\n  /**\n   * mapped to init(secondsFromGMT:)\n   * @link https://developer.apple.com/documentation/foundation/timezone/2293718-init\n   */\n  timeZoneOffsetInSeconds?: number;\n};\n\n/**\n * @link https://developer.apple.com/documentation/deviceactivity/deviceactivityschedule\n */\nexport type DeviceActivitySchedule = {\n  /**\n   * @link https://developer.apple.com/documentation/deviceactivity/deviceactivityschedule/intervalstart\n   */\n  intervalStart: DateComponents;\n  /**\n   * @link https://developer.apple.com/documentation/deviceactivity/deviceactivityschedule/intervalend\n   */\n  intervalEnd: DateComponents;\n  /**\n   * @link https://developer.apple.com/documentation/deviceactivity/deviceactivityschedule/repeats\n   */\n  repeats: boolean;\n  /**\n   * @link https://developer.apple.com/documentation/deviceactivity/deviceactivityschedule/warningtime\n   */\n  warningTime?: DateComponents;\n};\n\nexport type FamilyActivitySelection = string;\n\nexport type DeviceActivityEvent = {\n  familyActivitySelection: FamilyActivitySelection;\n  threshold: DateComponents;\n  eventName: string;\n  /**\n   * @link https://developer.apple.com/documentation/deviceactivity/deviceactivityevent/includespastactivity\n   */\n  includesPastActivity?: boolean;\n};\n\nexport type ShieldActionType =\n  | \"disableBlockAllMode\"\n  | \"dismiss\"\n  | \"addCurrentToWhitelist\"\n  | \"unblockPossibleFamilyActivitySelection\"\n  | \"unblockAllPossibleFamilyActivitySelections\"\n  | \"whitelistPossibleFamilyActivitySelection\"\n  | \"whitelistAllPossibleFamilyActivitySelections\"\n  | \"resetBlocks\"\n  | \"sendNotification\"\n  | \"openApp\";\n\nexport type ShieldAction = {\n  /** @deprecated use actions instead */\n  type?: ShieldActionType;\n  delay?: number;\n  payload?: NotificationPayload;\n  /**\n   * defaults to true\n   */\n  onlyFamilySelectionIdsContainingMonitoredActivityNames?: boolean;\n  behavior: \"close\" | \"defer\";\n  actions?: Action[];\n};\n\nexport type ShieldActions = {\n  primary: ShieldAction;\n  secondary?: ShieldAction;\n};\n\nexport type NotificationPayload = {\n  title: string;\n  body: string;\n  sound?: \"default\" | \"defaultCritical\" | \"defaultRingtone\";\n  categoryIdentifier?: string;\n  badge?: number;\n  userInfo?: Record<string, any>;\n  interruptionLevel?: \"active\" | \"critical\" | \"passive\";\n  targetContentIdentifier?: string;\n  launchImageName?: string;\n  identifier?: string;\n  threadIdentifier?: string;\n  subtitle?: string;\n};\n\ntype CommonTypeParams = {\n  sleepBefore?: number;\n  sleepAfter?: number;\n  skipIfAlreadyTriggeredBetween?: {\n    fromDate?: Date;\n    toDate?: Date;\n  };\n  skipIfAlreadyTriggeredAfter?: Date;\n  skipIfLargerEventRecordedAfter?: Date;\n  skipIfAlreadyTriggeredWithinMS?: number;\n  skipIfLargerEventRecordedWithinMS?: number;\n  skipIfAlreadyTriggeredBefore?: Date;\n  skipIfWhitelistOrBlacklistIsUnchanged?: boolean;\n  skipIfLargerEventRecordedSinceIntervalStarted?: boolean;\n  neverTriggerBefore?: Date;\n};\n\nexport type Action =\n  | ({\n      type: \"blockSelection\";\n      // keeping this for now - since it breaks the shield by sending in a token\n      familyActivitySelectionId: string;\n      shieldId?: string; // maybe consider moving to its own action\n    } & CommonTypeParams)\n  | ({\n      type: \"unblockSelection\";\n      // keeping this for now - since it breaks the shield by sending in a token\n      familyActivitySelectionId: string;\n    } & CommonTypeParams)\n  | ({\n      type: \"enableBlockAllMode\";\n      shieldId?: string; // maybe consider moving to its own action\n    } & CommonTypeParams)\n  | ({\n      type: \"resetBlocks\";\n    } & CommonTypeParams)\n  | ({\n      type: \"disableBlockAllMode\";\n    } & CommonTypeParams)\n  | ({\n      type: \"addSelectionToWhitelist\";\n      familyActivitySelection: ActivitySelectionInput;\n    } & CommonTypeParams)\n  | ({\n      type: \"removeSelectionFromWhitelist\";\n      familyActivitySelection: ActivitySelectionInput;\n    } & CommonTypeParams)\n  | ({\n      type: \"clearWhitelist\";\n    } & CommonTypeParams)\n  | ({\n      type: \"clearWhitelistAndUpdateBlock\";\n    } & CommonTypeParams)\n  | ({\n      type: \"sendNotification\";\n      payload: NotificationPayload;\n    } & CommonTypeParams)\n  | ({\n      type: \"openApp\";\n    } & CommonTypeParams)\n  | ({\n      type: \"sendHttpRequest\";\n      url: string;\n      options?: {\n        method?: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n        body?: Record<string, any>;\n        headers?: Record<string, string>;\n      };\n    } & CommonTypeParams)\n  | ({\n      type: \"setBadgeCount\";\n      count: number | string; // string for placeholder\n    } & CommonTypeParams)\n  | ({\n      type: \"removeAllPendingNotificationRequests\";\n    } & CommonTypeParams)\n  | ({\n      type: \"removePendingNotificationRequests\";\n      identifiers: string[];\n    } & CommonTypeParams)\n  | ({\n      type: \"addCurrentToWhitelist\";\n    } & CommonTypeParams)\n  | ({\n      type: \"removeAllDeliveredNotifications\";\n    } & CommonTypeParams)\n  | ({\n      type: \"startMonitoring\";\n      activityName: string;\n      deviceActivityEvents: DeviceActivityEvent[];\n      /**\n       * Optional delay in milliseconds from now for intervalStart.\n       * If provided, will override deviceActivitySchedule.intervalStart.\n       */\n      intervalStartDelayMs?: number;\n      intervalEndDelayMs?: number;\n    } & CommonTypeParams)\n  | ({\n      type: \"stopMonitoring\";\n      /**\n       * Optional array of activity names to stop. If not provided, stops all monitoring.\n       */\n      activityNames?: string[];\n    } & CommonTypeParams);\n\nexport type DeviceActivityEventRaw = Omit<\n  DeviceActivityEvent,\n  \"familyActivitySelection\"\n> & {\n  familyActivitySelectionIndex: number;\n};\n\nexport const AuthorizationStatus = {\n  /** Authorization status has not been determined yet */\n  notDetermined: 0,\n  /** Authorization has been denied */\n  denied: 1,\n  /** Authorization has been approved */\n  approved: 2,\n} as const;\n\n/**\n * Represents the authorization status for device activity monitoring.\n * Values:\n * - 0: Authorization not determined yet\n * - 1: Authorization denied\n * - 2: Authorization approved\n */\nexport type AuthorizationStatusType =\n  | typeof AuthorizationStatus.notDetermined\n  | typeof AuthorizationStatus.denied\n  | typeof AuthorizationStatus.approved;\n\nexport type CallbackName =\n  | \"intervalDidStart\"\n  | \"intervalWillStartWarning\"\n  | \"intervalDidEnd\"\n  | \"intervalWillEndWarning\"\n  | \"eventDidReachThreshold\"\n  | \"eventWillReachThresholdWarning\";\n\nexport type ActivitySelectionInput =\n  | {\n      activitySelectionId: string;\n      activitySelectionToken?: undefined;\n      currentBlocklist?: undefined;\n      currentWhitelist?: undefined;\n    }\n  | {\n      activitySelectionToken: string;\n      activitySelectionId?: undefined;\n      currentBlocklist?: undefined;\n      currentWhitelist?: undefined;\n    };\n\nexport type ActivitySelectionInputWithBlocks =\n  | {\n      currentBlocklist: true;\n      currentWhitelist?: undefined;\n      activitySelectionToken?: undefined;\n      activitySelectionId?: undefined;\n    }\n  | {\n      currentWhitelist: true;\n      currentBlocklist?: undefined;\n      activitySelectionToken?: undefined;\n      activitySelectionId?: undefined;\n    }\n  | ActivitySelectionInput;\n\n/**\n * @property {boolean} stripToken - if true, the token will be stripped from the resulting selection and not passed back over the bridge\n * @property {string} persistAsActivitySelectionId - will persist an activity selection id for the resulting selection\n */\nexport type SetOperationOptions = {\n  stripToken?: boolean;\n  persistAsActivitySelectionId?: string;\n};\n\nexport type ReactNativeDeviceActivityNativeModule = {\n  // userDefaults functions\n  userDefaultsSet: (dict: any) => void;\n  userDefaultsGet: (key: string) => any;\n  userDefaultsRemove: (key: string) => void;\n  userDefaultsClear: () => void;\n  moveFile: (\n    sourceUri: string,\n    destinationUri: string,\n    overwrite: boolean,\n  ) => void;\n  copyFile: (\n    sourceUri: string,\n    destinationUri: string,\n    overwrite: boolean,\n  ) => void;\n  userDefaultsAll: () => Record<string, any>;\n  getAppGroupFileDirectory: () => string;\n  userDefaultsClearWithPrefix: (prefix: string) => void;\n  // metadata and set functions\n  activitySelectionMetadata: (\n    familyActivitySelection: ActivitySelectionInputWithBlocks,\n  ) => ActivitySelectionMetadata;\n  activitySelectionWithMetadata: (\n    familyActivitySelection: ActivitySelectionInputWithBlocks,\n  ) => ActivitySelectionWithMetadata;\n  convertToIncludeCategories: (\n    familyActivitySelection: ActivitySelectionInputWithBlocks,\n  ) => ActivitySelectionWithMetadata;\n  intersection: (\n    familyActivitySelectionOne: ActivitySelectionInputWithBlocks,\n    familyActivitySelectionTwo: ActivitySelectionInputWithBlocks,\n    options: SetOperationOptions,\n  ) => ActivitySelectionWithMetadata;\n  union: (\n    familyActivitySelectionOne: ActivitySelectionInputWithBlocks,\n    familyActivitySelectionTwo: ActivitySelectionInputWithBlocks,\n    options: SetOperationOptions,\n  ) => ActivitySelectionWithMetadata;\n  difference: (\n    familyActivitySelectionOne: ActivitySelectionInputWithBlocks,\n    familyActivitySelectionTwo: ActivitySelectionInputWithBlocks,\n    options: SetOperationOptions,\n  ) => ActivitySelectionWithMetadata;\n  symmetricDifference: (\n    familyActivitySelectionOne: ActivitySelectionInputWithBlocks,\n    familyActivitySelectionTwo: ActivitySelectionInputWithBlocks,\n    options: SetOperationOptions,\n  ) => ActivitySelectionWithMetadata;\n\n  renameActivitySelection: (\n    previousFamilyActivitySelectionId: string,\n    newFamilyActivitySelectionId: string,\n  ) => void;\n\n  // auth functions\n  requestAuthorization: (\n    forIndividualOrChild: \"individual\" | \"child\",\n  ) => PromiseLike<void>;\n  revokeAuthorization: () => PromiseLike<void>;\n  authorizationStatus: () => AuthorizationStatusType;\n\n  // blocklist functions\n  unblockSelection: (\n    familyActivitySelection: ActivitySelectionInput,\n    triggeredBy?: string,\n  ) => void;\n  blockSelection: (\n    familyActivitySelection: ActivitySelectionInput,\n    triggeredBy?: string,\n  ) => void;\n  enableBlockAllMode: (triggeredBy?: string) => void;\n  // clears the blocklist and removes the shield (does not automatically clear the whitelist)\n  disableBlockAllMode: (triggeredBy?: string) => void;\n\n  resetBlocks: (triggeredBy?: string) => void;\n\n  removeSelectionFromWhitelistAndUpdateBlock: (\n    familyActivitySelection: ActivitySelectionInput,\n    triggeredBy?: string,\n  ) => void;\n  addSelectionToWhitelistAndUpdateBlock: (\n    familyActivitySelection: ActivitySelectionInput,\n    triggeredBy?: string,\n  ) => void;\n  clearWhitelistAndUpdateBlock: (triggeredBy?: string) => void;\n  clearWhitelist: () => void;\n\n  // reset, reload things\n  reloadDeviceActivityCenter: () => void;\n  refreshManagedSettingsStore: () => void;\n  clearAllManagedSettingsStoreSettings: () => void;\n\n  // monitoring\n  stopMonitoring: (activityNames?: string[]) => void;\n  startMonitoring: (\n    activityName: string,\n    deviceActivitySchedule: DeviceActivitySchedule,\n    deviceActivityEvents: DeviceActivityEventRaw[],\n    uniqueSelections: string[],\n  ) => void;\n\n  isShieldActive: () => boolean;\n  getEvents: (onlyEventsForActivityWithName?: string) => EventsLookup;\n  activities: () => string[];\n} & EventEmitter<EventListenerMap>;\n\nexport type OnAuthorizationStatusChange = ({\n  authorizationStatus,\n}: {\n  authorizationStatus: AuthorizationStatusType;\n}) => void;\n\n/**\n * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration\n */\nexport type ShieldConfiguration = {\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/backgroundblurstyle\n   */\n  backgroundColor?: UIColor;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/backgroundblurstyle\n   */\n  backgroundBlurStyle?: (typeof UIBlurEffectStyle)[keyof typeof UIBlurEffectStyle];\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/title\n   */\n  title?: string;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/label/color\n   */\n  titleColor?: UIColor;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/subtitle\n   */\n  subtitle?: string;\n  subtitleColor?: UIColor;\n  /**\n   * Use an image from the app group directory.\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/icon\n   */\n  iconAppGroupRelativePath?: string;\n  /**\n   * Use SF Symbols for the icon.\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/icon\n   * @link https://developer.apple.com/sf-symbols/\n   */\n  iconSystemName?: string;\n\n  /**\n   * Add a tint color to the icon.\n   */\n  iconTint?: UIColor;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/primarybuttonlabel\n   */\n  primaryButtonLabel?: string;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/label/color\n   */\n  primaryButtonLabelColor?: UIColor;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/primarybuttonbackgroundcolor\n   */\n  primaryButtonBackgroundColor?: UIColor;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/secondarybuttonlabel\n   */\n  secondaryButtonLabel?: string;\n  /**\n   * @link https://developer.apple.com/documentation/managedsettingsui/shieldconfiguration/label/color\n   */\n  secondaryButtonLabelColor?: UIColor;\n};\n\n/**\n * @link https://developer.apple.com/documentation/uikit/uicolor\n * @property {number} red (0-255)\n * @property {number} green (0-255)\n * @property {number} blue (0-255)\n * @property {number} alpha (0-1)\n */\ntype UIColor = {\n  /**\n   * Red (0-255)\n   */\n  red: number;\n  /**\n   * Green (0-255)\n   */\n  green: number;\n  /**\n   * Blue (0-255)\n   */\n  blue: number;\n  /**\n   * Alpha (0-1)\n   */\n  alpha?: number;\n};\n\nexport const UIBlurEffectStyle = {\n  extraLight: 0,\n  light: 1,\n  dark: 2,\n\n  // @available(iOS 10.0, *)\n  regular: 4,\n\n  // @available(iOS 10.0, *)\n  prominent: 5,\n\n  // @available(iOS 13.0, *)\n  systemUltraThinMaterial: 6,\n\n  // @available(iOS 13.0, *)\n  systemThinMaterial: 7,\n\n  // @available(iOS 13.0, *)\n  systemMaterial: 8,\n\n  // @available(iOS 13.0, *)\n  systemThickMaterial: 9,\n\n  // @available(iOS 13.0, *)\n  systemChromeMaterial: 10,\n\n  // @available(iOS 13.0, *)\n  systemUltraThinMaterialLight: 11,\n\n  // @available(iOS 13.0, *)\n  systemThinMaterialLight: 12,\n\n  // @available(iOS 13.0, *)\n  systemMaterialLight: 13,\n\n  // @available(iOS 13.0, *)\n  systemThickMaterialLight: 14,\n\n  // @available(iOS 13.0, *)\n  systemChromeMaterialLight: 15,\n\n  // @available(iOS 13.0, *)\n  systemUltraThinMaterialDark: 16,\n\n  // @available(iOS 13.0, *)\n  systemThinMaterialDark: 17,\n\n  // @available(iOS 13.0, *)\n  systemMaterialDark: 18,\n\n  // @available(iOS 13.0, *)\n  systemThickMaterialDark: 19,\n\n  // @available(iOS 13.0, *)\n  systemChromeMaterialDark: 20,\n} as const;\n\nexport type OnDeviceActivityDetectedListener = (event: {\n  activityName: string;\n}) => void;\n\nexport type EventListenerMap = {\n  onAuthorizationStatusChange: OnAuthorizationStatusChange;\n  onDeviceActivityDetected: OnDeviceActivityDetectedListener;\n  onDeviceActivityMonitorEvent: (\n    event: DeviceActivityMonitorEventPayload,\n  ) => void;\n};\n"]}